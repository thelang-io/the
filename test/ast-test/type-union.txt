======= stdin =======
obj Test1 {
  a: int
}

enum Test2 {
  Red,
  Green
}

type Test3 = str | int

main {
  aa: Test1 | Test2 | Test3

  ab: int | str
  ac: (int) | str
  ad: int | (str)
  ae: int | str | bool
  af: (int | str) | bool
  ag: int | (str | bool)
  ah: int | char | str | bool
  ai: (int | char) | str | bool
  aj: int | (char | str) | bool
  ak: int | char | (str | bool)

  al: int[] | str[]
  am: int[] | str[] | char[]
  an: int[] | str[] | char[] | bool[]

  ao: (() -> str) | (() -> int)
  ap: () -> str | () -> int
  aq: (() -> str) | (() -> int) | (() -> char)
  ar: () -> str | () -> int | () -> char
  as: (() -> str) | (() -> int) | (() -> char) | (() -> bool)
  at: () -> str | () -> int | () -> char | () -> bool

  au: str? | int?
  av: str? | int? | char?
  aw: str? | int? | char? | bool?

  ax: (ref str) | (ref int)
  ay: ref str | ref int
  az: (ref str) | (ref int) | (ref char)
  ba: ref str | ref int | ref char
  bb: (ref str) | (ref int) | (ref char) | (ref bool)
  bc: ref str | ref int | ref char | ref bool

  bd: (str | char) | (int | float)
  be: (str | char) | (int | float) | (bool | byte)
  bf: (str | char) | (int | float) | (bool | byte) | (i8 | i16)
}
======= stdout =======
<NodeObjDecl>
  <TypeObj codeName="Test1_0" name="Test1">
    <TypeField name="a">
      <BuiltinType name="int" />
    </TypeField>
  </TypeObj>
</NodeObjDecl>
<NodeEnumDecl>
  <NodeEnumDeclType>
    <TypeEnum codeName="Test2_0" name="Test2">
      <TypeEnumerator codeName="Test2SDRed_0" name="Red" />
      <TypeEnumerator codeName="Test2SDGreen_0" name="Green" />
    </TypeEnum>
  </NodeEnumDeclType>
  <NodeEnumDeclMembers>
    <NodeEnumDeclMember id="Red" />
    <NodeEnumDeclMember id="Green" />
  </NodeEnumDeclMembers>
</NodeEnumDecl>
<NodeTypeDecl>
  <TypeUnion codeName="Test3_0" name="Test3">
    <BuiltinType name="str" />
    <BuiltinType name="int" />
  </TypeUnion>
</NodeTypeDecl>
<NodeMain>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="aa" codeName="aa_0" frame="2">
        <TypeUnion name="union$1">
          <TypeObj codeName="Test1_0" name="Test1">
            <TypeField name="a">
              <BuiltinType name="int" />
            </TypeField>
          </TypeObj>
          <TypeEnum codeName="Test2_0" name="Test2">
            <TypeEnumerator codeName="Test2SDRed_0" name="Red" />
            <TypeEnumerator codeName="Test2SDGreen_0" name="Green" />
          </TypeEnum>
          <TypeUnion codeName="Test3_0" name="Test3">
            <BuiltinType name="str" />
            <BuiltinType name="int" />
          </TypeUnion>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ab" codeName="ab_0" frame="2">
        <TypeUnion name="union$2">
          <BuiltinType name="int" />
          <BuiltinType name="str" />
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ac" codeName="ac_0" frame="2">
        <TypeUnion name="union$3">
          <BuiltinType name="int" />
          <BuiltinType name="str" />
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ad" codeName="ad_0" frame="2">
        <TypeUnion name="union$4">
          <BuiltinType name="int" />
          <BuiltinType name="str" />
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ae" codeName="ae_0" frame="2">
        <TypeUnion name="union$5">
          <BuiltinType name="int" />
          <BuiltinType name="str" />
          <BuiltinType name="bool" />
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="af" codeName="af_0" frame="2">
        <TypeUnion name="union$7">
          <TypeUnion name="union$6">
            <BuiltinType name="int" />
            <BuiltinType name="str" />
          </TypeUnion>
          <BuiltinType name="bool" />
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ag" codeName="ag_0" frame="2">
        <TypeUnion name="union$9">
          <BuiltinType name="int" />
          <TypeUnion name="union$8">
            <BuiltinType name="str" />
            <BuiltinType name="bool" />
          </TypeUnion>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ah" codeName="ah_0" frame="2">
        <TypeUnion name="union$10">
          <BuiltinType name="int" />
          <BuiltinType name="char" />
          <BuiltinType name="str" />
          <BuiltinType name="bool" />
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ai" codeName="ai_0" frame="2">
        <TypeUnion name="union$12">
          <TypeUnion name="union$11">
            <BuiltinType name="int" />
            <BuiltinType name="char" />
          </TypeUnion>
          <BuiltinType name="str" />
          <BuiltinType name="bool" />
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="aj" codeName="aj_0" frame="2">
        <TypeUnion name="union$14">
          <BuiltinType name="int" />
          <TypeUnion name="union$13">
            <BuiltinType name="char" />
            <BuiltinType name="str" />
          </TypeUnion>
          <BuiltinType name="bool" />
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ak" codeName="ak_0" frame="2">
        <TypeUnion name="union$16">
          <BuiltinType name="int" />
          <BuiltinType name="char" />
          <TypeUnion name="union$15">
            <BuiltinType name="str" />
            <BuiltinType name="bool" />
          </TypeUnion>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="al" codeName="al_0" frame="2">
        <TypeUnion name="union$17">
          <TypeArray name="array_int">
            <BuiltinType name="int" />
          </TypeArray>
          <TypeArray name="array_str">
            <BuiltinType name="str" />
          </TypeArray>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="am" codeName="am_0" frame="2">
        <TypeUnion name="union$18">
          <TypeArray name="array_int">
            <BuiltinType name="int" />
          </TypeArray>
          <TypeArray name="array_str">
            <BuiltinType name="str" />
          </TypeArray>
          <TypeArray name="array_char">
            <BuiltinType name="char" />
          </TypeArray>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="an" codeName="an_0" frame="2">
        <TypeUnion name="union$19">
          <TypeArray name="array_int">
            <BuiltinType name="int" />
          </TypeArray>
          <TypeArray name="array_str">
            <BuiltinType name="str" />
          </TypeArray>
          <TypeArray name="array_char">
            <BuiltinType name="char" />
          </TypeArray>
          <TypeArray name="array_bool">
            <BuiltinType name="bool" />
          </TypeArray>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ao" codeName="ao_0" frame="2">
        <TypeUnion name="union$20">
          <TypeFn name="fn$0">
            <TypeFnReturnType>
              <BuiltinType name="str" />
            </TypeFnReturnType>
          </TypeFn>
          <TypeFn name="fn$1">
            <TypeFnReturnType>
              <BuiltinType name="int" />
            </TypeFnReturnType>
          </TypeFn>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ap" codeName="ap_0" frame="2">
        <TypeFn name="fn$2">
          <TypeFnReturnType>
            <TypeUnion name="union$21">
              <BuiltinType name="str" />
              <TypeFn name="fn$1">
                <TypeFnReturnType>
                  <BuiltinType name="int" />
                </TypeFnReturnType>
              </TypeFn>
            </TypeUnion>
          </TypeFnReturnType>
        </TypeFn>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="aq" codeName="aq_0" frame="2">
        <TypeUnion name="union$22">
          <TypeFn name="fn$0">
            <TypeFnReturnType>
              <BuiltinType name="str" />
            </TypeFnReturnType>
          </TypeFn>
          <TypeFn name="fn$1">
            <TypeFnReturnType>
              <BuiltinType name="int" />
            </TypeFnReturnType>
          </TypeFn>
          <TypeFn name="fn$3">
            <TypeFnReturnType>
              <BuiltinType name="char" />
            </TypeFnReturnType>
          </TypeFn>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ar" codeName="ar_0" frame="2">
        <TypeFn name="fn$5">
          <TypeFnReturnType>
            <TypeUnion name="union$24">
              <BuiltinType name="str" />
              <TypeFn name="fn$4">
                <TypeFnReturnType>
                  <TypeUnion name="union$23">
                    <BuiltinType name="int" />
                    <TypeFn name="fn$3">
                      <TypeFnReturnType>
                        <BuiltinType name="char" />
                      </TypeFnReturnType>
                    </TypeFn>
                  </TypeUnion>
                </TypeFnReturnType>
              </TypeFn>
            </TypeUnion>
          </TypeFnReturnType>
        </TypeFn>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="as" codeName="as_0" frame="2">
        <TypeUnion name="union$25">
          <TypeFn name="fn$0">
            <TypeFnReturnType>
              <BuiltinType name="str" />
            </TypeFnReturnType>
          </TypeFn>
          <TypeFn name="fn$1">
            <TypeFnReturnType>
              <BuiltinType name="int" />
            </TypeFnReturnType>
          </TypeFn>
          <TypeFn name="fn$3">
            <TypeFnReturnType>
              <BuiltinType name="char" />
            </TypeFnReturnType>
          </TypeFn>
          <TypeFn name="fn$6">
            <TypeFnReturnType>
              <BuiltinType name="bool" />
            </TypeFnReturnType>
          </TypeFn>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="at" codeName="at_0" frame="2">
        <TypeFn name="fn$9">
          <TypeFnReturnType>
            <TypeUnion name="union$28">
              <BuiltinType name="str" />
              <TypeFn name="fn$8">
                <TypeFnReturnType>
                  <TypeUnion name="union$27">
                    <BuiltinType name="int" />
                    <TypeFn name="fn$7">
                      <TypeFnReturnType>
                        <TypeUnion name="union$26">
                          <BuiltinType name="char" />
                          <TypeFn name="fn$6">
                            <TypeFnReturnType>
                              <BuiltinType name="bool" />
                            </TypeFnReturnType>
                          </TypeFn>
                        </TypeUnion>
                      </TypeFnReturnType>
                    </TypeFn>
                  </TypeUnion>
                </TypeFnReturnType>
              </TypeFn>
            </TypeUnion>
          </TypeFnReturnType>
        </TypeFn>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="au" codeName="au_0" frame="2">
        <TypeUnion name="union$29">
          <TypeOptional name="opt_str">
            <BuiltinType name="str" />
          </TypeOptional>
          <TypeOptional name="opt_int">
            <BuiltinType name="int" />
          </TypeOptional>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="av" codeName="av_0" frame="2">
        <TypeUnion name="union$30">
          <TypeOptional name="opt_str">
            <BuiltinType name="str" />
          </TypeOptional>
          <TypeOptional name="opt_int">
            <BuiltinType name="int" />
          </TypeOptional>
          <TypeOptional name="opt_char">
            <BuiltinType name="char" />
          </TypeOptional>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="aw" codeName="aw_0" frame="2">
        <TypeUnion name="union$31">
          <TypeOptional name="opt_str">
            <BuiltinType name="str" />
          </TypeOptional>
          <TypeOptional name="opt_int">
            <BuiltinType name="int" />
          </TypeOptional>
          <TypeOptional name="opt_char">
            <BuiltinType name="char" />
          </TypeOptional>
          <TypeOptional name="opt_bool">
            <BuiltinType name="bool" />
          </TypeOptional>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ax" codeName="ax_0" frame="2">
        <TypeUnion name="union$32">
          <TypeRef name="ref_str">
            <BuiltinType name="str" />
          </TypeRef>
          <TypeRef name="ref_int">
            <BuiltinType name="int" />
          </TypeRef>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ay" codeName="ay_0" frame="2">
        <TypeRef name="ref_union$33">
          <TypeUnion name="union$33">
            <BuiltinType name="str" />
            <TypeRef name="ref_int">
              <BuiltinType name="int" />
            </TypeRef>
          </TypeUnion>
        </TypeRef>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="az" codeName="az_0" frame="2">
        <TypeUnion name="union$34">
          <TypeRef name="ref_str">
            <BuiltinType name="str" />
          </TypeRef>
          <TypeRef name="ref_int">
            <BuiltinType name="int" />
          </TypeRef>
          <TypeRef name="ref_char">
            <BuiltinType name="char" />
          </TypeRef>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="ba" codeName="ba_0" frame="2">
        <TypeRef name="ref_union$36">
          <TypeUnion name="union$36">
            <BuiltinType name="str" />
            <TypeRef name="ref_union$35">
              <TypeUnion name="union$35">
                <BuiltinType name="int" />
                <TypeRef name="ref_char">
                  <BuiltinType name="char" />
                </TypeRef>
              </TypeUnion>
            </TypeRef>
          </TypeUnion>
        </TypeRef>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="bb" codeName="bb_0" frame="2">
        <TypeUnion name="union$37">
          <TypeRef name="ref_str">
            <BuiltinType name="str" />
          </TypeRef>
          <TypeRef name="ref_int">
            <BuiltinType name="int" />
          </TypeRef>
          <TypeRef name="ref_char">
            <BuiltinType name="char" />
          </TypeRef>
          <TypeRef name="ref_bool">
            <BuiltinType name="bool" />
          </TypeRef>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="bc" codeName="bc_0" frame="2">
        <TypeRef name="ref_union$40">
          <TypeUnion name="union$40">
            <BuiltinType name="str" />
            <TypeRef name="ref_union$39">
              <TypeUnion name="union$39">
                <BuiltinType name="int" />
                <TypeRef name="ref_union$38">
                  <TypeUnion name="union$38">
                    <BuiltinType name="char" />
                    <TypeRef name="ref_bool">
                      <BuiltinType name="bool" />
                    </TypeRef>
                  </TypeUnion>
                </TypeRef>
              </TypeUnion>
            </TypeRef>
          </TypeUnion>
        </TypeRef>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="bd" codeName="bd_0" frame="2">
        <TypeUnion name="union$43">
          <TypeUnion name="union$41">
            <BuiltinType name="str" />
            <BuiltinType name="char" />
          </TypeUnion>
          <TypeUnion name="union$42">
            <BuiltinType name="int" />
            <BuiltinType name="float" />
          </TypeUnion>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="be" codeName="be_0" frame="2">
        <TypeUnion name="union$47">
          <TypeUnion name="union$44">
            <BuiltinType name="str" />
            <BuiltinType name="char" />
          </TypeUnion>
          <TypeUnion name="union$45">
            <BuiltinType name="int" />
            <BuiltinType name="float" />
          </TypeUnion>
          <TypeUnion name="union$46">
            <BuiltinType name="bool" />
            <BuiltinType name="byte" />
          </TypeUnion>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
  <NodeVarDecl>
    <NodeVarDeclVar>
      <Var name="bf" codeName="bf_0" frame="2">
        <TypeUnion name="union$52">
          <TypeUnion name="union$48">
            <BuiltinType name="str" />
            <BuiltinType name="char" />
          </TypeUnion>
          <TypeUnion name="union$49">
            <BuiltinType name="int" />
            <BuiltinType name="float" />
          </TypeUnion>
          <TypeUnion name="union$50">
            <BuiltinType name="bool" />
            <BuiltinType name="byte" />
          </TypeUnion>
          <TypeUnion name="union$51">
            <BuiltinType name="i8" />
            <BuiltinType name="i16" />
          </TypeUnion>
        </TypeUnion>
      </Var>
    </NodeVarDeclVar>
  </NodeVarDecl>
</NodeMain>
